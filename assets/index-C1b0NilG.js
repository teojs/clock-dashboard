var e=Object.defineProperty,t=(t,a,l)=>((t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l)(t,"symbol"!=typeof a?a+"":a,l);function a(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import{S as l,r as o,o as n,a as s,d as i,c as r,w as u,b as c,e as d,f as h,g as v,h as f,T as p,i as w,t as m,j as g,s as x,n as y,u as b,C as k,k as _,F as M,l as C,m as T,p as S,X as E,q as I,v as D,x as j,R as L,y as P,z as A,D as N,W as O,P as F,Z as R,A as W,B as z,L as H,E as J,G as V,H as U,I as q,J as B,K as Y,M as $,N as G,O as Q,Q as X,U as K,V as Z,Y as ee,_ as te,$ as ae,a0 as le,a1 as oe,a2 as ne,a3 as se}from"./vendor-BJJFFz0T.js";function ie(e){try{const t=l.fromDate(e),a=t.getLunar(),o=a.getMonthInChinese(),n=a.getDayInChinese(),s=a.getYearInGanZhiByLiChun(),i=a.getJieQi(),r=a.getFestivals(),u=t.getFestivals(),c=[...r,...u],d=c.length>0?c[0]:i||"",h="åˆä¸€"===n?"".concat(o,"æœˆ"):n;return{fullDate:d?"".concat(h," Â· ").concat(d):h,date:d||h,year:"".concat(s,"å¹´"),month:"".concat(o,"æœˆ"),isFestival:!!d,festival:d}}catch(t){return console.error("Lunar date error (lunar-typescript):",t),{fullDate:"åŠ è½½å¤±è´¥",date:"åŠ è½½å¤±è´¥",year:"--å¹´",month:"åŠ è½½å¤±è´¥",isFestival:!1}}}function re(){const e=o(new Date),t=o(0),a=o(0),l=o(0),i=o(0),r=o(0),u=o(0),c=o(ie(new Date)),d=o((new Date).toDateString()),h=o(!1);let v;const f=()=>{const o=new Date;e.value=o;const n=String(o.getHours()).padStart(2,"0"),s=String(o.getMinutes()).padStart(2,"0"),h=String(o.getSeconds()).padStart(2,"0");t.value=Number.parseInt(n[0]),a.value=Number.parseInt(n[1]),l.value=Number.parseInt(s[0]),i.value=Number.parseInt(s[1]),r.value=Number.parseInt(h[0]),u.value=Number.parseInt(h[1]);const v=o.toDateString();v!==d.value&&(c.value=ie(o),d.value=v)};return n(()=>{f(),v=window.setInterval(f,1e3),c.value=ie(new Date)}),s(()=>{clearInterval(v)}),{now:e,h1:t,h2:a,m1:l,m2:i,s1:r,s2:u,lunar:c,showSeconds:h}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ue={key:0,class:"new-year-egg-wrapper pointer-events-none fixed inset-0 z-[100]"},ce={key:0,class:"fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm"},de={class:"countdown-number text-[60vh] font-black text-white italic"},he=(e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a},ve=he(i({__name:"NewYearEgg",setup(e){const{now:a}=re(),l=o(!1),i=o(0),g=new Date(2026,1,16,23,59,45).getTime(),x=r(()=>l.value?new Date(g+i.value):a.value),y=r(()=>ie(x.value)),b=r(()=>"é™¤å¤•"===y.value.festival),k=r(()=>"æ˜¥èŠ‚"===y.value.festival),_=r(()=>{const e=x.value,t=e.getMonth(),a=e.getDate(),l=e.getHours(),o=e.getMinutes(),n=e.getSeconds(),s=11===t&&31===a&&23===l&&59===o&&n>=30,i=0===t&&1===a&&0===l&&o<2,r=b.value&&23===l&&59===o&&n>=30,u=k.value&&0===l&&o<2;return s||i||r||u});let M;const C=r(()=>x.value.getSeconds()),T=r(()=>{const e=x.value,t=e.getHours(),a=e.getMinutes(),l=e.getSeconds(),o=23===t&&59===a&&l>=50;return(11===e.getMonth()&&31===e.getDate()||b.value)&&o}),S=r(()=>60-C.value),E=r(()=>{const e=x.value,t=e.getHours(),a=e.getMinutes(),l=0===t&&a<1;return(0===e.getMonth()&&1===e.getDate()||k.value)&&l}),I=o(null);let D=null;class j{constructor(e,a){t(this,"x"),t(this,"y"),t(this,"targetY"),t(this,"color"),t(this,"particles",[]),t(this,"exploded",!1),t(this,"velocity"),this.x=Math.random()*e,this.y=a,this.targetY=Math.random()*(.5*a),this.color="hsl(".concat(360*Math.random(),", 100%, 50%)"),this.velocity=4+4*Math.random()}update(){this.exploded?this.particles.forEach((e,t)=>{e.update(),e.alpha<=0&&this.particles.splice(t,1)}):(this.y-=this.velocity,this.y<=this.targetY&&this.explode())}explode(){this.exploded=!0;for(let e=0;e<50;e++)this.particles.push(new L(this.x,this.y,this.color))}draw(e){this.exploded?this.particles.forEach(t=>t.draw(e)):(e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,2,0,2*Math.PI),e.fill())}}class L{constructor(e,a,l){t(this,"x"),t(this,"y"),t(this,"color"),t(this,"vx"),t(this,"vy"),t(this,"alpha",1),t(this,"gravity",.05),this.x=e,this.y=a,this.color=l;const o=Math.random()*Math.PI*2,n=3*Math.random()+1;this.vx=Math.cos(o)*n,this.vy=Math.sin(o)*n}update(){this.vx*=.98,this.vy*=.98,this.vy+=this.gravity,this.x+=this.vx,this.y+=this.vy,this.alpha-=.015}draw(e){e.globalAlpha=this.alpha,e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,1.5,0,2*Math.PI),e.fill(),e.globalAlpha=1}}const P=[];function A(){if(!I.value)return;const e=I.value;e.width=window.innerWidth,e.height=window.innerHeight}function N(){if(!I.value)return;const e=I.value,t=e.getContext("2d");t&&(t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, 0.2)",t.fillRect(0,0,e.width,e.height),t.globalCompositeOperation="source-over",E.value&&Math.random()<.05&&P.push(new j(e.width,e.height)),P.forEach((e,a)=>{e.update(),e.draw(t),e.exploded&&0===e.particles.length&&P.splice(a,1)}),D=requestAnimationFrame(N))}return u(_,e=>{e?setTimeout(()=>{A(),D||N()},50):D&&(cancelAnimationFrame(D),D=null)},{immediate:!0}),n(()=>{l.value&&l.value&&!M&&(M=window.setInterval(()=>{i.value+=1e3},1e3)),window.addEventListener("resize",A)}),s(()=>{M&&(clearInterval(M),M=void 0),D&&cancelAnimationFrame(D),window.removeEventListener("resize",A)}),(e,t)=>_.value?(h(),c("div",ue,[v(p,{name:"scale"},{default:w(()=>[T.value?(h(),c("div",ce,[f("div",de,m(S.value),1)])):d("",!0)]),_:1}),f("canvas",{ref_key:"canvasRef",ref:I,class:"w-full h-full"},null,512)])):d("",!0)}}),[["__scopeId","data-v-969f1787"]]);async function fe(e,t){const a=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e,"&longitude=").concat(t,"&localityLanguage=zh"));if(!a.ok)throw new Error("Reverse geocoding API error: ".concat(a.statusText));return await a.json()}async function pe(){const e=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?localityLanguage=zh");if(!e.ok)throw new Error("IP location API error: ".concat(e.statusText));return await e.json()}async function we(e,t){const a="https://api.open-meteo.com/v1/forecast?latitude=".concat(e,"&longitude=").concat(t,"&current=temperature_2m,rain,wind_speed_10m,is_day,apparent_temperature,showers,relative_humidity_2m,precipitation,weather_code&hourly=precipitation_probability,uv_index,temperature_2m&timezone=auto&forecast_days=1"),l=await fetch(a);if(!l.ok)throw new Error("Weather API error: ".concat(l.statusText));const o=await l.json(),n=(new Date).getHours();return o.current_hour_index=n,o}async function me(e,t){const a="https://air-quality-api.open-meteo.com/v1/air-quality?latitude=".concat(e,"&longitude=").concat(t,"&current=us_aqi"),l=await fetch(a);if(!l.ok)throw new Error("Air Quality API error: ".concat(l.statusText));return await l.json()}function ge(e,t=!0){const a="./weather-icons/".concat(-1===e?"not-available":0===e?t?"clear-day":"clear-night":1===e||2===e?t?"partly-cloudy-day":"partly-cloudy-night":3===e?"overcast":45===e||48===e?t?"fog-day":"fog-night":e>=51&&e<=55?"drizzle":e>=61&&e<=65?"rain":66===e||67===e?"sleet":e>=71&&e<=77?"snow":e>=80&&e<=82?t?"partly-cloudy-day-rain":"partly-cloudy-night-rain":85===e||86===e?t?"partly-cloudy-day-snow":"partly-cloudy-night-snow":e>=95?t?"thunderstorms-day-rain":"thunderstorms-night-rain":t?"clear-day":"clear-night",".svg");return{text:{0:"æ™´æœ—",1:"æ™´é—´å¤šäº‘",2:"å¤šäº‘",3:"é˜´",45:"é›¾",48:"æ²‰ç§¯é›¾",51:"å°æ¯›æ¯›é›¨",53:"æ¯›æ¯›é›¨",55:"å¤§æ¯›æ¯›é›¨",56:"è½»å¾®å†»æ¯›æ¯›é›¨",57:"å†»æ¯›æ¯›é›¨",61:"å°é›¨",63:"ä¸­é›¨",65:"å¤§é›¨",66:"è½»å¾®å†»é›¨",67:"å†»é›¨",71:"å°é›ª",73:"ä¸­é›ª",75:"å¤§é›ª",77:"é›ªç²’",80:"å°é˜µé›¨",81:"é˜µé›¨",82:"å¼ºé˜µé›¨",85:"å°é˜µé›ª",86:"é˜µé›ª",95:"é›·é˜µé›¨",96:"é›·é›¨ä¼´æœ‰å†°é›¹",99:"å¼ºé›·é›¨ä¼´å†°é›¹"}[e]||"æœªçŸ¥",icon:a}}const xe=g("weather",()=>{const e=o("auto"),t=o(39.9),a=o(116.4),l=o("åŒ—äº¬å¸‚"),n=o(20),s=o(!0),i=o(!0),r=o(!0),c=o(null),d=o(null),h=o(!1),v=o("å®šä½ä¸­..."),f=o({text:"æ­£åœ¨èŽ·å–",icon:ge(-1).icon}),p=o(null);async function w(e,t){try{const[a,l]=await Promise.all([we(e,t),me(e,t)]);c.value=a,d.value=l,f.value=ge(a.current.weather_code,1===a.current.is_day),h.value=!1}catch(a){f.value.text="æŽ¥å£é”™è¯¯",f.value.icon=ge(-1).icon,h.value=!1}}function m(e){if(!e)return e;const t=e.split(";");return t.length>1?t[0].trim():e}async function g(e){try{const t=e.trim();if(!t)return[];const a=await async function(e,t=3){const a=e.trim();if(!a)return[];const l=new URL("https://nominatim.openstreetmap.org/search");l.searchParams.set("q",a),l.searchParams.set("format","json"),l.searchParams.set("limit",t.toString()),l.searchParams.set("accept-language","zh-CN"),l.searchParams.set("addressdetails","1");const o=await fetch(l.toString(),{headers:{"User-Agent":"ClockDashboard/1.0"}});if(!o.ok)throw new Error("Geocoding API error: ".concat(o.statusText));const n=await o.json();return Array.isArray(n)&&n.length>0?n:[]}(t);return a.length>0?a.map(e=>{const a=e.name||"",l=e.display_name||"",o=m(a.split(",")[0]||a),n=function(e){return e?e.split(",").map(e=>m(e)).join(", "):e}(l);return{name:o||t,displayName:n||o||t,latitude:Number.parseFloat(e.lat),longitude:Number.parseFloat(e.lon)}}):[]}catch(t){return[]}}return u(e,e=>{"auto"===e&&(p.value=null,v.value="å®šä½ä¸­...")},{flush:"sync"}),{locationMode:e,customLat:t,customLon:a,customCity:l,refreshInterval:n,showRainEffect:s,showThunderEffect:i,showSnowEffect:r,weatherData:c,loading:h,locationText:v,weatherInfo:f,airQualityData:d,updateWeather:async function(){if(h.value=!0,f.value.text="æ­£åœ¨èŽ·å–",v.value="å®šä½ä¸­...","coords"===e.value){p.value=null;const e=await async function(e,t){try{const a=await fe(e,t);return a.city||a.locality||a.principalSubdivision||"æœªçŸ¥åŸŽå¸‚"}catch(a){return"".concat(t.toFixed(2),", ").concat(e.toFixed(2))}}(t.value,a.value);return v.value=e,void(await w(t.value,a.value))}if("city"===e.value){p.value=null,v.value="å®šä½ä¸­...";if(!l.value.trim())throw v.value="åŸŽå¸‚åç§°ä¸ºç©º",new Error("åŸŽå¸‚åç§°ä¸èƒ½ä¸ºç©º");const e=await g(l.value);if(e.length>0){const t=e[0];v.value=t.name,await w(t.latitude,t.longitude)}return}if("auto"===e.value&&p.value){const{lat:e,lon:t}=p.value;return v.value=p.value.city,void(await w(e,t))}try{const e=await async function(e=5e3){if(!navigator.geolocation){const e=await pe();if(e.latitude&&e.longitude)return{latitude:e.latitude,longitude:e.longitude};throw new Error("Geolocation is not supported and IP location failed")}try{return await new Promise((t,a)=>{navigator.geolocation.getCurrentPosition(e=>{t({latitude:e.coords.latitude,longitude:e.coords.longitude})},e=>{a(e)},{timeout:e})})}catch(t){const e=await pe();if(e.latitude&&e.longitude)return{latitude:e.latitude,longitude:e.longitude};throw new Error("Geolocation failed and IP location failed")}}(5e3),t=await fe(e.latitude,e.longitude),a=t.city||t.locality||t.principalSubdivision||"æœªçŸ¥åŸŽå¸‚";v.value=a,p.value={lat:e.latitude,lon:e.longitude,city:a},await w(e.latitude,e.longitude)}catch(o){try{v.value="åŒ—äº¬å¸‚ (é»˜è®¤)";const e="åŒ—äº¬å¸‚ (é»˜è®¤)";p.value={lat:39.9,lon:116.4,city:e},await w(39.9,116.4)}catch(n){f.value.text="æ›´æ–°è¶…æ—¶",h.value=!1}}},searchCities:g}},{persist:{pick:["locationMode","customLat","customLon","customCity","refreshInterval","showRainEffect","showThunderEffect","showSnowEffect"]}}),ye={class:"weather-effects-container pointer-events-none fixed inset-0 z-0 overflow-hidden"},be=he(i({__name:"WeatherEffects",setup(e){const t=xe(),{weatherData:a,showRainEffect:l,showThunderEffect:i,showSnowEffect:v}=x(t),p=r(()=>{var e,t,l;return null!=(l=null==(t=null==(e=a.value)?void 0:e.current)?void 0:t.weather_code)?l:-1}),w=r(()=>{if(!l.value)return!1;const e=p.value;return e>=51&&e<=67||e>=80&&e<=82||e>=95&&e<=99}),m=r(()=>{if(!v.value)return!1;const e=p.value;return e>=71&&e<=77||85===e||86===e}),g=r(()=>{if(!i.value)return!1;const e=p.value;return 95===e||96===e||99===e}),b=r(()=>{const e=p.value;return 65===e||82===e||99===e?150:63===e||81===e||96===e?100:e>=51&&e<=55?40:80}),k=r(()=>{const e=p.value;return 75===e||86===e?100:73===e?60:30}),_=o(!1),M=o(!1);let C=[];const T=o(null);let S=null,E=null,I=[],D=[];function j(){if(!T.value)return;const e=T.value;if(e.width=window.innerWidth,e.height=window.innerHeight,w.value){const t=b.value,a=t<=40?5:t<=100?7:10;I=[];for(let l=0;l<t;l++)I.push({x:Math.random()*e.width,y:Math.random()*e.height,l:20+15*Math.random(),v:a+Math.random()*a})}if(m.value){const t=k.value;D=[];for(let a=0;a<t;a++)D.push({x:Math.random()*e.width,y:Math.random()*e.height,r:2+3*Math.random(),v:1+2*Math.random(),w:.5+1*Math.random(),o:Math.random()*Math.PI*2})}}function L(){if(!T.value)return;const e=T.value,t=e.getContext("2d");if(t){if(t.clearRect(0,0,e.width,e.height),g.value&&M.value&&function(e){M.value&&0!==C.length&&(e.save(),e.shadowBlur=15,e.shadowColor="rgba(255, 255, 255, 1)",e.strokeStyle="rgba(255, 255, 255, 0.8)",e.lineWidth=4,e.lineCap="round",e.lineJoin="round",C.forEach(t=>{e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let a=1;a<t.length;a++)e.lineTo(t[a].x,t[a].y);e.stroke()}),e.shadowBlur=0,e.strokeStyle="#ffffff",e.lineWidth=2,C.forEach(t=>{e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let a=1;a<t.length;a++)e.lineTo(t[a].x,t[a].y);e.stroke()}),e.restore())}(t),w.value){t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=1.5,t.lineCap="round";for(let a=0;a<I.length;a++){const l=I[a];t.beginPath(),t.moveTo(l.x,l.y);const o=.15*l.v;t.lineTo(l.x+2*o,l.y+l.l),t.stroke(),l.y+=l.v,l.x+=o,l.y>e.height&&(l.y=-l.l,l.x=Math.random()*e.width)}}if(m.value){t.fillStyle="rgba(255, 255, 255, 0.8)";for(let a=0;a<D.length;a++){const l=D[a];t.beginPath(),t.arc(l.x,l.y,l.r,0,2*Math.PI),t.fill(),l.y+=l.v,l.x+=Math.sin(l.o+l.y/50)*l.w,l.y>e.height&&(l.y=-l.r,l.x=Math.random()*e.width)}}S=requestAnimationFrame(L)}}function P(){if(!g.value)return;!function(){const e=100+200*Math.random(),t=T.value?.6*T.value.height:400,a=[];let l=Math.random()*(window.innerWidth-e)+e/2,o=50*Math.random();const n=5+Math.floor(5*Math.random()),s=t/n;a.push({x:l,y:o});const i=[];for(let r=1;r<=n;r++)if(l+=60*(Math.random()-.5),o+=s,a.push({x:l,y:o}),Math.random()>.7&&r<n){const e=[];e.push({x:l,y:o});const t=l+80*(Math.random()-.5),a=o+.5*s;e.push({x:t,y:a}),i.push(e)}i.push(a),C=i}(),M.value=!0,_.value=!0,setTimeout(()=>{_.value=!1,M.value=!1},50),setTimeout(()=>{_.value=!0,M.value=!0},100),setTimeout(()=>{_.value=!1,M.value=!1},150),setTimeout(()=>{_.value=!0,M.value=!0},200),setTimeout(()=>{_.value=!1,M.value=!1},400);const e=3e3+7e3*Math.random();E=window.setTimeout(P,e)}return u([w,b,m,k],()=>{j()}),u(g,e=>{e?P():E&&(clearTimeout(E),E=null,_.value=!1)},{immediate:!0}),n(()=>{j(),L(),window.addEventListener("resize",j)}),s(()=>{E&&clearTimeout(E),S&&cancelAnimationFrame(S),window.removeEventListener("resize",j)}),(e,t)=>(h(),c("div",ye,[g.value?(h(),c("div",{key:0,class:y(["flash-overlay absolute inset-0 bg-white opacity-0 transition-opacity duration-75",{"opacity-10":_.value}])},null,2)):d("",!0),f("canvas",{ref_key:"canvasRef",ref:T,class:"absolute inset-0 w-full h-full"},null,512)]))}}),[["__scopeId","data-v-f120a1fe"]]),ke={class:"full-screen-calendar text-white"},_e={class:"flex items-center justify-between w-full mb-8 px-4 md:px-12"},Me={class:"text-left"},Ce={class:"text-4xl md:text-5xl font-bold tracking-widest"},Te={class:"flex items-center gap-3"},Se={class:"flex-1 flex flex-col w-full"},Ee={class:"grid grid-cols-7 mb-2"},Ie={class:"calendar-grid"},De={class:"day-number-wrapper flex flex-col items-center justify-center"},je={class:"text-2xl md:text-3xl font-bold"},Le=he(i({__name:"CalendarView",setup(e,{expose:t}){const a=o(new Date),l=o(new Date),n=r(()=>a.value.getFullYear()),s=r(()=>a.value.getMonth()),i=r(()=>n.value===l.value.getFullYear()&&s.value===l.value.getMonth()),u=r(()=>{const e=n.value,t=s.value,a=new Date(e,t,1).getDay(),o=new Date(e,t+1,0).getDate(),i=new Date(e,t,0).getDate(),r=[];for(let l=a-1;l>=0;l--){const a=new Date(e,t-1,i-l);r.push({date:a,isOtherMonth:!0,lunar:ie(a)})}for(let n=1;n<=o;n++){const a=new Date(e,t,n);r.push({date:a,isOtherMonth:!1,isToday:a.toDateString()===l.value.toDateString(),lunar:ie(a)})}const u=42-r.length;for(let l=1;l<=u;l++){const a=new Date(e,t+1,l);r.push({date:a,isOtherMonth:!0,lunar:ie(a)})}return r});function d(e){const t=new Date(a.value);t.setMonth(t.getMonth()+e),a.value=t}function p(){l.value=new Date,a.value=new Date}return t({refreshToday:function(){l.value=new Date,i.value&&(a.value=new Date)}}),(e,t)=>(h(),c("div",ke,[f("div",_e,[f("div",Me,[f("h2",Ce,m(n.value)+"å¹´"+m(s.value+1)+"æœˆ ",1)]),f("div",Te,[f("button",{class:"p-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300",onClick:t[0]||(t[0]=e=>d(-1))},[v(b(k),{class:"w-6 h-6"})]),f("button",{class:"px-6 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300 text-md font-medium",onClick:p}," ä»Šå¤© "),f("button",{class:"p-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300",onClick:t[1]||(t[1]=e=>d(1))},[v(b(_),{class:"w-6 h-6"})])])]),f("div",Se,[f("div",Ee,[(h(),c(M,null,C(["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"],e=>f("div",{key:e,class:"calendar-header-day text-xl font-bold"},m(e),1)),64))]),f("div",Ie,[(h(!0),c(M,null,C(u.value,(e,t)=>(h(),c("div",{key:t,class:y(["calendar-day",{"other-month":e.isOtherMonth,today:e.isToday}])},[f("div",De,[f("span",je,m(e.date.getDate()),1),f("span",{class:y(["lunar-text text-sm font-normal mt-1",e.lunar.isFestival?"text-blue-300 opacity-100":"opacity-60"])},m(e.lunar.date),3)])],2))),128))])])]))}}),[["__scopeId","data-v-a16d947d"]]),Pe={class:"digit-item"},Ae={class:"digit-item"},Ne=he(i({__name:"Digit",props:{value:{},trigger:{},showSeconds:{type:Boolean}},setup(e){const t=e,a=o(t.value),l=o(t.value),s=o(!1),i=o("rotate(".concat((12*Math.random()-6).toFixed(1),"deg)"));return u(()=>t.trigger,()=>{i.value="rotate(".concat((12*Math.random()-6).toFixed(1),"deg)")}),u(()=>t.value,(e,t)=>{e!==t&&(i.value="rotate(".concat((12*Math.random()-6).toFixed(1),"deg)"),l.value=e,s.value=!0,setTimeout(()=>{s.value=!1,a.value=e},800))}),n(()=>{a.value=t.value,l.value=t.value}),(t,o)=>(h(),c("div",{class:y(["digit-container",{"show-seconds":e.showSeconds}]),style:T({transform:i.value})},[f("div",{class:y(["digit-window",{animating:s.value}])},[f("div",Pe,m(a.value),1),f("div",Ae,m(l.value),1)],2)],6))}}),[["__scopeId","data-v-b3b994b7"]]),Oe="1.15.0",Fe={class:"relative w-full max-w-lg bg-neutral-900 border border-white/10 rounded-3xl p-8 text-white overflow-y-auto max-h-[90vh]"},Re={class:"flex items-center justify-between mb-8"},We={class:"space-y-8"},ze={class:"grid grid-cols-3 gap-3"},He=["onClick"],Je={key:0,class:"mt-4 grid grid-cols-2 gap-4"},Ve={class:"space-y-2"},Ue={class:"space-y-2"},qe={key:1,class:"mt-4 space-y-2 relative"},Be={class:"relative"},Ye={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},$e={key:0,class:"absolute z-10 w-full mt-2 bg-neutral-800 border border-white/10 rounded-xl overflow-hidden shadow-lg"},Ge=["onMousedown"],Qe={class:"text-white font-medium"},Xe={class:"text-xs text-white/50 mt-1 line-clamp-1"},Ke={key:1,class:"absolute z-10 w-full mt-2 bg-neutral-800 border border-white/10 rounded-xl px-4 py-3 text-white/50 text-sm"},Ze={class:"grid grid-cols-4 gap-2"},et=["onClick"],tt={class:"grid grid-cols-3 gap-3"},at={class:"flex gap-4 pt-4"},lt=["disabled"],ot=["disabled"],nt={class:"text-center mt-4 text-xs text-white/30"},st=i({__name:"WeatherSettingsModal",props:{show:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const a=e,l=t,n=Oe,s=xe(),{loading:i}=x(s),r=o({locationMode:s.locationMode,customLat:s.customLat,customLon:s.customLon,customCity:s.customCity,refreshInterval:s.refreshInterval,showRainEffect:s.showRainEffect,showThunderEffect:s.showThunderEffect,showSnowEffect:s.showSnowEffect}),p=o(""),w=o([]),g=o(!1),k=o(!1);let _=null,T=0;async function A(){const e=p.value.trim();if(_&&(clearTimeout(_),_=null),!e)return w.value=[],k.value=!1,void(g.value=!1);T++;const t=T;_=setTimeout(async()=>{if(t===T&&p.value.trim()===e){g.value=!0,k.value=!0;try{const a=await s.searchCities(e);t===T&&p.value.trim()===e&&(w.value=a)}catch(a){t===T&&(w.value=[])}finally{t===T&&(g.value=!1)}}},500)}function N(){setTimeout(()=>{k.value=!1},200)}function O(){s.$patch({locationMode:r.value.locationMode,customLat:r.value.customLat,customLon:r.value.customLon,customCity:r.value.customCity,refreshInterval:r.value.refreshInterval,showRainEffect:r.value.showRainEffect,showThunderEffect:r.value.showThunderEffect,showSnowEffect:r.value.showSnowEffect}),l("close"),s.updateWeather()}async function F(){s.$patch({locationMode:r.value.locationMode,customLat:r.value.customLat,customLon:r.value.customLon,customCity:r.value.customCity}),await s.updateWeather()}return u(()=>a.show,e=>{e&&(r.value={locationMode:s.locationMode,customLat:s.customLat,customLon:s.customLon,customCity:s.customCity,refreshInterval:s.refreshInterval,showRainEffect:s.showRainEffect,showThunderEffect:s.showThunderEffect,showSnowEffect:s.showSnowEffect},p.value=r.value.customCity||"",w.value=[],k.value=!1)}),u(()=>r.value.locationMode,e=>{"city"!==e&&(p.value="",w.value=[],k.value=!1)}),(t,a)=>e.show?(h(),c("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4",onTouchstart:a[9]||(a[9]=S(()=>{},["stop"])),onTouchend:a[10]||(a[10]=S(()=>{},["stop"])),onMousedown:a[11]||(a[11]=S(()=>{},["stop"])),onMouseup:a[12]||(a[12]=S(()=>{},["stop"]))},[f("div",{class:"absolute inset-0 bg-black/80",onClick:a[0]||(a[0]=e=>t.$emit("close"))}),f("div",Fe,[f("div",Re,[a[13]||(a[13]=f("h2",{class:"text-3xl font-medium tracking-wide"}," å¤©æ°”è®¾ç½® ",-1)),f("button",{class:"p-2 hover:bg-white/10 rounded-full transition-colors",onClick:a[1]||(a[1]=e=>t.$emit("close"))},[v(b(E),{class:"w-6 h-6"})])]),f("div",We,[f("section",null,[a[18]||(a[18]=f("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," ä½ç½®èŽ·å–æ–¹å¼ ",-1)),f("div",ze,[(h(),c(M,null,C(["auto","coords","city"],e=>f("button",{key:e,class:y(["p-2 rounded-xl border transition-all text-center",r.value.locationMode===e?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:t=>r.value.locationMode=e},m("auto"===e?"è‡ªåŠ¨å®šä½":"coords"===e?"ç»çº¬åº¦":"åŸŽå¸‚å"),11,He)),64))]),"coords"===r.value.locationMode?(h(),c("div",Je,[f("div",Ve,[a[14]||(a[14]=f("label",{class:"text-xs text-white/40 block ml-1"},"ç»åº¦ (Longitude)",-1)),I(f("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>r.value.customLon=e),type:"number",step:"0.0001",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30"},null,512),[[D,r.value.customLon,void 0,{number:!0}]])]),f("div",Ue,[a[15]||(a[15]=f("label",{class:"text-xs text-white/40 block ml-1"},"çº¬åº¦ (Latitude)",-1)),I(f("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>r.value.customLat=e),type:"number",step:"0.0001",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30"},null,512),[[D,r.value.customLat,void 0,{number:!0}]])]),a[16]||(a[16]=f("div",{class:"space-y-2 text-xs text-white/40 flex items-center col-span-2"},[j(" èŽ·å–ç»çº¬åº¦ : "),f("a",{href:"https://lbs.baidu.com/maptool/getpoint",target:"_blank",class:"text-blue-500 ml-1"},"https://lbs.baidu.com/maptool/getpoint")],-1))])):d("",!0),"city"===r.value.locationMode?(h(),c("div",qe,[a[17]||(a[17]=f("label",{class:"text-xs text-white/40 block ml-1"},"åŸŽå¸‚åç§° (ä¾‹å¦‚: åŒ—äº¬ã€çº½çº¦ã€Londonã€Tokyo)",-1)),f("div",Be,[I(f("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>p.value=e),type:"text",placeholder:"è¾“å…¥åŸŽå¸‚åç§°ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼‰",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30 placeholder:text-white/20",onInput:A,onFocus:a[5]||(a[5]=e=>k.value=w.value.length>0),onBlur:N},null,544),[[D,p.value]]),g.value?(h(),c("div",Ye,[v(b(L),{class:"w-4 h-4 animate-spin text-white/40"})])):d("",!0)]),k.value&&w.value.length>0?(h(),c("div",$e,[(h(!0),c(M,null,C(w.value,(e,t)=>(h(),c("div",{key:t,class:"px-4 py-3 hover:bg-white/10 cursor-pointer transition-colors border-b border-white/5 last:border-b-0",onMousedown:S(t=>function(e){r.value.customCity=e.name,p.value=e.name,w.value=[],k.value=!1,s.$patch({customLat:e.latitude,customLon:e.longitude})}(e),["prevent"])},[f("div",Qe,m(e.name),1),f("div",Xe,m(e.displayName),1)],40,Ge))),128))])):d("",!0),k.value&&!g.value&&0===w.value.length&&p.value.trim()?(h(),c("div",Ke," æœªæ‰¾åˆ°ç›¸å…³åŸŽå¸‚ ")):d("",!0)])):d("",!0)]),f("section",null,[a[19]||(a[19]=f("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," å¤©æ°”æ›´æ–°é¢‘çŽ‡ ",-1)),f("div",Ze,[(h(),c(M,null,C([5,10,20,30],e=>f("button",{key:e,class:y(["py-2 px-1 rounded-xl border transition-all text-center text-sm",r.value.refreshInterval===e?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:t=>r.value.refreshInterval=e},m(e)+"åˆ† ",11,et)),64))])]),f("section",null,[a[23]||(a[23]=f("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," å¤©æ°”ç‰¹æ•ˆæ˜¾ç¤º ",-1)),f("div",tt,[f("div",{class:y(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",r.value.showRainEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[6]||(a[6]=e=>r.value.showRainEffect=!r.value.showRainEffect)},[...a[20]||(a[20]=[f("span",{class:"text-base"},"ä¸‹é›¨",-1)])],2),f("div",{class:y(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",r.value.showThunderEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[7]||(a[7]=e=>r.value.showThunderEffect=!r.value.showThunderEffect)},[...a[21]||(a[21]=[f("span",{class:"text-base"},"æ‰“é›·",-1)])],2),f("div",{class:y(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",r.value.showSnowEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[8]||(a[8]=e=>r.value.showSnowEffect=!r.value.showSnowEffect)},[...a[22]||(a[22]=[f("span",{class:"text-base"},"ä¸‹é›ª",-1)])],2)])]),f("div",at,[f("button",{class:"flex items-center justify-center gap-2 p-4 px-6 rounded-2xl bg-white/10 hover:bg-white/20 transition-all font-medium",disabled:b(i),onClick:F},[v(b(L),{class:y(["w-5 h-5",{"animate-spin":b(i)}])},null,8,["class"]),a[24]||(a[24]=j(" ç«‹å³åˆ·æ–°å¤©æ°” ",-1))],8,lt),f("button",{class:y(["flex-1 flex items-center justify-center gap-2 p-4 rounded-2xl font-bold transition-all",g.value||b(i)?"bg-white/30 text-white/50 cursor-not-allowed":"bg-white text-black hover:bg-opacity-90"]),disabled:g.value||b(i),onClick:O},[v(b(P),{class:"w-5 h-5"}),a[25]||(a[25]=j(" ä¿å­˜å¹¶å…³é—­ ",-1))],10,ot)]),f("div",nt," Clock Dashboard v"+m(b(n))+" ï½œ Copyright Â© 2025-2026 teojs ",1)])])],32)):d("",!0)}}),it={class:"flex items-center justify-center md:justify-start gap-0"},rt={id:"weather-icon",class:"w-28 h-28 drop-shadow-xl flex-shrink-0"},ut=["src","alt"],ct={id:"weather-text",class:"text-4xl font-semibold tracking-wide"},dt={id:"location-text",class:"text-lg text-white/80 uppercase tracking-widest mt-1 whitespace-nowrap"},ht={class:"text-blue-400 text-xl tabular-nums"},vt={class:"flex items-center justify-center px-4 gap-6"},ft={class:"flex items-end"},pt={id:"temp-val",class:"text-8xl font-extralight mr-1"},wt={class:"flex flex-col items-end justify-between gap-2"},mt={id:"temp-max",class:"text-3xl font-medium text-red-200"},gt={id:"temp-min",class:"text-3xl font-medium text-blue-200"},xt={class:"flex flex-col justify-center items-center md:items-end gap-3 text-white text-3xl tabular-nums"},yt={class:"grid grid-cols-2 gap-3"},bt={class:"flex items-center justify-end gap-3"},kt={id:"humidity-val"},_t={class:"flex items-center justify-end gap-3"},Mt={class:"flex items-start gap-2"},Ct={id:"aqi-label",class:"text-sm opacity-60 ml-[-4px]"},Tt={class:"flex items-center justify-end gap-3"},St={id:"apparent-temp-val"},Et={class:"flex items-center justify-end gap-3"},It={id:"uv-val"},Dt=he(i({__name:"Weather",setup(e){const t=xe(),{weatherData:a,loading:l,locationText:i,weatherInfo:d,refreshInterval:p,airQualityData:w}=x(t),g=o(!1);let k;const _=r(()=>{var e,t,a;return void 0===(a=null==(t=null==(e=w.value)?void 0:e.current)?void 0:t.us_aqi)?{label:"--",color:"text-white/40"}:a<=50?{label:"ä¼˜",color:"text-green-400"}:a<=100?{label:"è‰¯",color:"text-yellow-400"}:a<=150?{label:"è½»åº¦",color:"text-orange-400"}:a<=200?{label:"ä¸­åº¦",color:"text-red-400"}:a<=300?{label:"é‡åº¦",color:"text-purple-400"}:{label:"ä¸¥é‡",color:"text-red-900"}});function C(){k&&clearInterval(k),k=window.setInterval(t.updateWeather,60*p.value*1e3)}return u(p,()=>{C()}),n(()=>{t.updateWeather(),C()}),s(()=>{clearInterval(k)}),(e,t)=>{var o,n,s;return h(),c(M,null,[f("div",{id:"weather-container",class:y(["weather-clickable grid grid-cols-1 md:grid-cols-3 gap-3 w-full pt-10 transition-opacity duration-700",{"opacity-30":b(l),"opacity-100":!b(l)}]),onClick:t[0]||(t[0]=e=>g.value=!0)},[f("div",it,[f("div",rt,[f("img",{src:b(d).icon,alt:b(d).text,class:"w-full h-full object-contain"},null,8,ut)]),f("div",null,[f("p",ct,m(b(d).text),1),f("p",dt,[j(m(b(i))+" Â· é™é›¨ ",1),f("span",ht,m(b(a)?b(a).hourly.precipitation_probability[b(a).current_hour_index]:"--")+"%",1)])])]),f("div",vt,[f("div",ft,[f("div",pt,m(b(a)?Math.round(b(a).current.temperature_2m):"--"),1),t[2]||(t[2]=f("div",{class:"text-3xl font-light opacity-70 mb-12"}," Â°C ",-1))]),f("div",wt,[f("span",mt,m(b(a)?Math.round(Math.max(...b(a).hourly.temperature_2m)):"--")+"Â° ",1),f("span",gt,m(b(a)?Math.round(Math.min(...b(a).hourly.temperature_2m)):"--")+"Â° ",1)])]),f("div",xt,[f("div",yt,[f("div",bt,[f("span",kt,m(b(a)?b(a).current.relative_humidity_2m:"--")+"% ",1),v(b(N),{class:"w-8 h-8 text-blue-500/60"})]),f("div",_t,[f("div",Mt,[f("span",{id:"aqi-val",class:y(_.value.color)},m((null==(n=null==(o=b(w))?void 0:o.current)?void 0:n.us_aqi)||"--"),3),f("span",Ct,m((null==(s=_.value)?void 0:s.label)||"-"),1)]),v(b(O),{class:"w-8 h-8 text-teal-500/60"})]),f("div",Tt,[f("span",St,m(b(a)?Math.round(b(a).current.apparent_temperature):"--")+"Â°C ",1),v(b(F),{class:"w-8 h-8 text-orange-500/60"})]),f("div",Et,[f("span",It,m(b(a)?Math.round(b(a).hourly.uv_index[b(a).current_hour_index]):"--"),1),v(b(R),{class:"w-8 h-8 text-yellow-500/60"})])])])],2),(h(),A(W,{to:"body"},[v(st,{show:g.value,onClose:t[1]||(t[1]=e=>g.value=!1)},null,8,["show"])]))],64)}}}),[["__scopeId","data-v-3cfb3383"]]),jt={class:"glass-panel h-full p-4 md:p-8 flex flex-col items-center justify-evenly text-white w-full"},Lt={class:"flex flex-col md:flex-row items-center md:items-start gap-6 w-full justify-center"},Pt={class:"flex items-center gap-4"},At={class:"date-day-big text-glow"},Nt={class:"flex flex-col mt-2"},Ot={class:"text-5xl tracking-[0.2em] opacity-90 uppercase"},Ft={class:"text-4xl tracking-[0.2em] font-light opacity-70 mt-1"},Rt={class:"flex flex-col items-center md:items-start mt-5"},Wt={class:"text-5xl font-medium text-white/90 tracking-wider"},zt={class:"text-4xl tracking-[0.2em] font-light opacity-70 mt-2"},Ht={key:0,class:"clock-separator second-separator"},Jt=he(i({__name:"ClockWeatherView",setup(e){const{h1:t,h2:a,m1:l,m2:o,s1:n,s2:s,lunar:i,now:r,showSeconds:u}=re();function p(){u.value=!u.value}return(e,w)=>(h(),c("div",jt,[f("div",Lt,[f("div",Pt,[f("div",At,m(b(r).getDate()),1),f("div",Nt,[f("span",Ot,m(b(r).toLocaleDateString("zh-CN",{weekday:"long"})),1),f("span",Ft,m(b(r).getFullYear())+"å¹´"+m(b(r).getMonth()+1)+"æœˆ ",1)])]),w[0]||(w[0]=f("div",{class:"hidden md:block w-px h-16 mx-16 self-center"},null,-1)),f("div",Rt,[f("span",Wt,m(b(i).fullDate),1),f("span",zt,m(b(i).year)+m(b(i).month),1)])]),f("div",{class:y(["clock-display text-glow tabular-nums mb-4 cursor-pointer transition-all duration-500",{"with-seconds":b(u)}]),onClick:p},[v(Ne,{value:b(t),"show-seconds":b(u),trigger:b(u)?b(r).getTime():Math.floor(b(r).getTime()/6e4)},null,8,["value","show-seconds","trigger"]),v(Ne,{value:b(a),"show-seconds":b(u),trigger:b(u)?b(r).getTime():Math.floor(b(r).getTime()/6e4)},null,8,["value","show-seconds","trigger"]),w[1]||(w[1]=f("div",{class:"clock-separator"}," : ",-1)),v(Ne,{value:b(l),"show-seconds":b(u),trigger:b(u)?b(r).getTime():Math.floor(b(r).getTime()/6e4)},null,8,["value","show-seconds","trigger"]),v(Ne,{value:b(o),"show-seconds":b(u),trigger:b(u)?b(r).getTime():Math.floor(b(r).getTime()/6e4)},null,8,["value","show-seconds","trigger"]),b(u)?(h(),c("div",Ht," : ")):d("",!0),b(u)?(h(),c(M,{key:1},[v(Ne,{class:"second-digit",value:b(n),"show-seconds":b(u),trigger:b(r).getTime()},null,8,["value","show-seconds","trigger"]),v(Ne,{class:"second-digit",value:b(s),"show-seconds":b(u),trigger:b(r).getTime()},null,8,["value","show-seconds","trigger"])],64)):d("",!0)],2),v(Dt)]))}}),[["__scopeId","data-v-e6fff65f"]]);const Vt=g("config",()=>{const e=localStorage.getItem("ha_config"),t=o(e?JSON.parse(e):{url:"",token:"",entities:[]});return e&&localStorage.removeItem("ha_config"),{haConfig:t}},{persist:!0}),Ut={class:"bg-neutral-900 p-6 md:p-8 rounded-3xl border border-white/10 w-full max-w-2xl text-white max-h-[90vh] flex flex-col relative"},qt={class:"flex items-center justify-between mb-6 flex-shrink-0"},Bt={class:"flex items-center gap-2"},Yt={class:"space-y-6 overflow-y-auto pr-2 flex-1"},$t={key:0,class:"space-y-6"},Gt={class:"space-y-4"},Qt={class:"space-y-3"},Xt={class:"flex flex-col gap-1"},Kt=["onClick"],Zt=["onClick"],ea=["onUpdate:modelValue"],ta=["onUpdate:modelValue","placeholder"],aa=["onClick"],la={key:1,class:"space-y-3"},oa=i({__name:"SmartSettingsModal",props:{show:{type:Boolean},entitiesStates:{}},emits:["close","saved"],setup(e,{emit:t}){const a=e,l=t,n=Vt(),s=o(JSON.parse(JSON.stringify(n.haConfig))),i=o(!1),r=o("");function p(){s.value.entities.push({id:"",name:""})}function w(e,t){const a=e+t;if(a>=0&&a<s.value.entities.length){const t=s.value.entities[e];s.value.entities[e]=s.value.entities[a],s.value.entities[a]=t}}function m(){if(i.value)try{const e=JSON.parse(r.value);if(!e||"object"!=typeof e)throw new Error("Must be an object");s.value.url=e.url||"",s.value.token=e.token||"",s.value.entities=Array.isArray(e.entities)?e.entities:[]}catch(e){return void alert("JSON æ ¼å¼é”™è¯¯ï¼Œä¿å­˜å¤±è´¥")}n.haConfig=JSON.parse(JSON.stringify(s.value)),l("saved"),l("close")}return u(()=>a.show,e=>{e&&(s.value=JSON.parse(JSON.stringify(n.haConfig)))}),u(i,e=>{if(e)r.value=JSON.stringify({url:s.value.url,token:s.value.token,entities:s.value.entities},null,2);else try{const e=JSON.parse(r.value);e&&"object"==typeof e&&(void 0!==e.url&&(s.value.url=e.url),void 0!==e.token&&(s.value.token=e.token),Array.isArray(e.entities)&&(s.value.entities=e.entities))}catch(t){alert("JSON æ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥åŽå†åˆ‡æ¢æ¨¡å¼"),setTimeout(()=>{i.value=!0},0)}}),(t,o)=>e.show?(h(),c("div",{key:0,id:"settings-modal",class:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 md:p-6 z-[1000]",onTouchstart:o[6]||(o[6]=S(()=>{},["stop"])),onTouchend:o[7]||(o[7]=S(()=>{},["stop"])),onMousedown:o[8]||(o[8]=S(()=>{},["stop"])),onMouseup:o[9]||(o[9]=S(()=>{},["stop"]))},[f("div",{class:"absolute top-0 left-0 right-0 bottom-0 bg-black/80",onClick:o[0]||(o[0]=e=>l("close"))}),f("div",Ut,[f("div",qt,[o[12]||(o[12]=f("h3",{class:"text-2xl font-bold"}," Home Assistant é…ç½® ",-1)),f("div",Bt,[f("button",{class:"text-xs flex items-center gap-1.5 opacity-50 hover:opacity-100 transition-all px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg border border-white/5",onClick:o[1]||(o[1]=e=>i.value=!i.value)},[i.value?(h(),c(M,{key:1},[v(b(H),{class:"w-3.5 h-3.5"}),o[11]||(o[11]=j(" åˆ—è¡¨æ¨¡å¼ ",-1))],64)):(h(),c(M,{key:0},[v(b(z),{class:"w-3.5 h-3.5"}),o[10]||(o[10]=j(" JSON æ¨¡å¼ ",-1))],64))]),f("button",{class:"opacity-50 hover:opacity-100 p-2",onClick:o[2]||(o[2]=e=>l("close"))},[v(b(E),{class:"w-6 h-6"})])])]),f("div",Yt,[i.value?(h(),c("div",la,[I(f("textarea",{"onUpdate:modelValue":o[5]||(o[5]=e=>r.value=e),rows:"18",class:"w-full bg-white/5 border border-white/10 text-white font-mono text-sm rounded-xl px-4 py-3 outline-none focus:border-white/30",placeholder:'{"url": "http://...", "token": "...", "entities": [{"id": "light.living_room", "name": "å®¢åŽ…ç¯"}]}'},null,512),[[D,r.value]]),o[17]||(o[17]=f("div",{class:"flex justify-between items-center text-[10px] opacity-30 px-1"},[f("span",null,"æ”¯æŒåœ°å€ã€ä»¤ç‰Œã€è®¾å¤‡åˆ—è¡¨å…¨é‡å¯¼å…¥å¯¼å‡º"),f("span",null,'æ ¼å¼: { "url": "...", "token": "...", "entities": [...] }')],-1)),o[18]||(o[18]=f("div",{class:"mt-4 p-4 bg-orange-500/10 border border-orange-500/20 rounded-xl"},[f("p",{class:"text-xs text-orange-200/60 leading-relaxed"},[f("strong",null,"ðŸ’¡ è·¨åŸŸæç¤ºï¼š"),j(" å¦‚æžœæŽ¥å£æ— æ³•åŠ è½½ï¼Œè¯·ç¡®ä¿åœ¨ Home Assistant çš„ "),f("code",null,"configuration.yaml"),j(" ä¸­é…ç½®äº† "),f("code",null,"cors_allowed_origins"),j("ï¼ŒåŒ…å«å½“å‰çœ‹æ¿çš„è®¿é—®åŸŸåæˆ– IPã€‚ ")])],-1))])):(h(),c("div",$t,[f("div",null,[o[13]||(o[13]=f("label",{class:"block text-sm opacity-50 mb-2 uppercase tracking-widest"},"HA åœ°å€",-1)),I(f("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.value.url=e),type:"text",placeholder:"http://192.168.1.xxx:8123",class:"w-full bg-white/5 border border-white/10 text-white rounded-xl px-4 py-3 outline-none focus:border-white/30"},null,512),[[D,s.value.url]])]),f("div",null,[o[14]||(o[14]=f("label",{class:"block text-sm opacity-50 mb-2 uppercase tracking-widest"},"é•¿æœŸè®¿é—®ä»¤ç‰Œ",-1)),I(f("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.value.token=e),type:"password",placeholder:"è¾“å…¥ä»¤ç‰Œ",class:"w-full bg-white/5 border border-white/10 text-white rounded-xl px-4 py-3 outline-none focus:border-white/30"},null,512),[[D,s.value.token]])]),f("div",Gt,[o[16]||(o[16]=f("label",{class:"block text-sm opacity-50 uppercase tracking-widest"},"è®¾å¤‡åˆ—è¡¨",-1)),f("div",Qt,[(h(!0),c(M,null,C(s.value.entities,(e,t)=>{var l,o,n;return h(),c("div",{key:t,class:"flex gap-2"},[f("div",Xt,[f("button",{class:"p-1 opacity-30 hover:opacity-100 transition-opacity",onClick:e=>w(t,-1)},[v(b(V),{class:"w-4 h-4"})],8,Kt),f("button",{class:"p-1 opacity-30 hover:opacity-100 transition-opacity",onClick:e=>w(t,1)},[v(b(U),{class:"w-4 h-4"})],8,Zt)]),I(f("input",{"onUpdate:modelValue":t=>e.id=t,type:"text",class:"flex-1 bg-white/5 border border-white/10 text-white rounded-xl px-4 py-2 outline-none focus:border-white/30",placeholder:"å®žä½“ ID"},null,8,ea),[[D,e.id]]),I(f("input",{"onUpdate:modelValue":t=>e.name=t,type:"text",class:"w-24 md:w-32 bg-white/5 border border-white/10 text-white rounded-xl px-4 py-2 outline-none focus:border-white/30",placeholder:(null==(n=null==(o=null==(l=a.entitiesStates)?void 0:l[e.id])?void 0:o.attributes)?void 0:n.friendly_name)||"å¤‡æ³¨å"},null,8,ta),[[D,e.name]]),f("button",{class:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",onClick:e=>function(e){s.value.entities.splice(e,1)}(t)},[v(b(q),{class:"w-5 h-5"})],8,aa)])}),128)),f("button",{class:"flex items-center gap-2 text-sm opacity-70 hover:opacity-100 transition-all mt-2 bg-white/5 px-4 py-2 rounded-xl w-full justify-center border border-dashed border-white/10 hover:border-white/20",onClick:p},[v(b(J),{class:"w-5 h-5"}),o[15]||(o[15]=j(" æ·»åŠ è®¾å¤‡ ",-1))])])])]))]),f("div",{class:"pt-6 mt-2 border-t border-white/10 flex-shrink-0"},[f("button",{class:"w-full py-4 bg-white text-black font-bold rounded-2xl hover:bg-opacity-90 transition-all shadow-xl",onClick:m}," ä¿å­˜å¹¶åº”ç”¨ ")])])],32)):d("",!0)}}),na={class:"glass-panel p-8 md:p-14 flex flex-col items-center text-white h-full justify-start overflow-y-auto w-full"},sa={class:"flex items-center justify-between w-full mb-10"},ia={class:"flex items-baseline gap-6"},ra={key:0,class:"flex items-center gap-6 opacity-60"},ua={key:0,class:"flex items-center gap-2"},ca={class:"text-2xl font-medium tabular-nums"},da={key:1,class:"flex items-center gap-2"},ha={class:"text-2xl font-medium tabular-nums"},va={class:"flex gap-4"},fa={key:0,id:"ha-entities",class:"grid grid-cols-2 md:grid-cols-3 gap-6 w-full"},pa=["onClick"],wa={class:"flex items-center justify-between w-full mb-4"},ma={key:0,class:"flex gap-4 text-sm font-medium opacity-80"},ga={key:0,class:"flex items-center gap-1.5"},xa={class:"text-base"},ya={key:1,class:"flex items-center gap-1.5"},ba={class:"text-base"},ka={class:"flex flex-col overflow-hidden w-full"},_a={class:"font-bold text-lg truncate w-full"},Ma={class:"text-sm opacity-50 uppercase tracking-widest"},Ca={key:1,class:"col-span-full text-center py-20 opacity-50"},Ta=he(i({__name:"SmartHomeView",setup(e,{expose:t}){const a=Vt(),{haConfig:l}=x(a),n=o({}),s=o({}),i=o(!1),u=o(!1),p=r(()=>{const e=l.value.entities.find(e=>e.id.startsWith("climate."));if(!e)return null;const t=n.value[e.id];if(!t||!t.attributes)return null;const{current_temperature:a,current_humidity:o}=t.attributes;return void 0===a&&void 0===o?null:{temp:a,humi:o}});function w(e){var t;const a=null==(t=n.value[e])?void 0:t.state;return e.startsWith("cover.")?"open"===a:e.startsWith("climate.")?"off"!==a&&"unavailable"!==a:"on"===a}async function g(e){if(l.value.url&&l.value.token)try{const t=await async function(e,t){const a=await fetch("".concat(e.url,"/api/states/").concat(t),{headers:{Authorization:"Bearer ".concat(e.token)}});if(!a.ok)throw new Error("Home Assistant API error: ".concat(a.statusText));return await a.json()}({url:l.value.url,token:l.value.token},e);n.value[e]=t}catch(t){console.error("HA Fetch Error:",t)}}async function k(){if(i.value=!0,!l.value.url||!l.value.token)return void(i.value=!1);const e=l.value.entities.map(e=>g(e.id));await Promise.all(e),setTimeout(()=>{i.value=!1},500)}async function _(e){const t=e.split(".")[0],a=w(e);let o="";o="cover"===t?a?"close_cover":"open_cover":a?"turn_off":"turn_on",s.value[e]=!0;try{await async function(e,t,a,l){const o=await fetch("".concat(e.url,"/api/services/").concat(t,"/").concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(e.token),"Content-Type":"application/json"},body:JSON.stringify(l)});if(!o.ok)throw new Error("Home Assistant service call error: ".concat(o.statusText))}({url:l.value.url,token:l.value.token},t,o,{entity_id:e}),setTimeout(()=>g(e).then(()=>{s.value[e]=!1}),500)}catch(n){alert("æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œå’Œé…ç½®"),s.value[e]=!1}}return t({updateAllStates:k,entitiesStates:n}),(e,t)=>(h(),c("div",na,[f("div",sa,[f("div",ia,[t[2]||(t[2]=f("h2",{class:"text-4xl font-bold tracking-widest text-nowrap"}," æ™ºèƒ½æŽ§åˆ¶ ",-1)),p.value?(h(),c("div",ra,[void 0!==p.value.temp?(h(),c("div",ua,[v(b(B),{class:"w-5 h-5 text-orange-400"}),f("span",ca,m(p.value.temp)+"Â°",1)])):d("",!0),void 0!==p.value.humi?(h(),c("div",da,[v(b(N),{class:"w-5 h-5 text-blue-400"}),f("span",ha,m(p.value.humi)+"%",1)])):d("",!0)])):d("",!0)]),f("div",va,[f("button",{class:y(["p-3 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all",{"opacity-50 pointer-events-none":i.value}]),onClick:k},[v(b(Y),{class:y(["w-5 h-5",{"animate-spin":i.value}])},null,8,["class"])],2),f("button",{class:"p-3 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all",onClick:t[0]||(t[0]=e=>u.value=!0)},[v(b($),{class:"w-5 h-5"})])])]),b(l).url&&b(l).token?(h(),c("div",fa,[(h(!0),c(M,null,C(b(l).entities,e=>{var t,a,l,o,i;return h(),c("div",{key:e.id,class:y(["ha-card",{on:w(e.id),"opacity-50 pointer-events-none":s.value[e.id]}]),onClick:t=>_(e.id)},[f("div",wa,[f("div",{class:y(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",w(e.id)?"bg-white text-black":"bg-white/10 text-white"])},[s.value[e.id]?(h(),A(b(G),{key:0,class:"w-6 h-6 animate-spin"})):(h(),A(Q((o=e.id.split(".")[0],i=w(e.id),"light"===o?i?X:K:"switch"===o?Z:"fan"===o?ee:"media_player"===o?te:"cover"===o?ae:"climate"===o?le:R)),{key:1,class:"w-6 h-6"}))],2),e.id.startsWith("climate.")&&(null==(t=n.value[e.id])?void 0:t.attributes)?(h(),c("div",ma,[void 0!==n.value[e.id].attributes.current_temperature?(h(),c("div",ga,[v(b(B),{class:"w-4 h-4 text-orange-400"}),f("span",xa,m(n.value[e.id].attributes.current_temperature)+"Â°",1)])):d("",!0),void 0!==n.value[e.id].attributes.current_humidity?(h(),c("div",ya,[v(b(N),{class:"w-4 h-4 text-blue-400"}),f("span",ba,m(n.value[e.id].attributes.current_humidity)+"%",1)])):d("",!0)])):d("",!0)]),f("div",ka,[f("span",_a,m(e.name||n.value[e.id]&&n.value[e.id].attributes&&n.value[e.id].attributes.friendly_name||e.id),1),f("span",Ma,[e.id.startsWith("climate.")&&w(e.id)?(h(),c(M,{key:0},[j(m((null==(l=null==(a=n.value[e.id])?void 0:a.attributes)?void 0:l.temperature)?"".concat(n.value[e.id].attributes.temperature,"Â°C"):"å·²å¼€å¯"),1)],64)):(h(),c(M,{key:1},[j(m(w(e.id)?"å·²å¼€å¯":"å·²å…³é—­"),1)],64))])])],10,pa)}),128))])):(h(),c("div",Ca,[...t[3]||(t[3]=[f("p",null,"è¯·ç‚¹å‡»å³ä¸Šè§’è®¾ç½® Home Assistant åœ°å€å’Œä»¤ç‰Œ",-1)])])),(h(),A(W,{to:"body"},[v(oa,{show:u.value,"entities-states":n.value,onClose:t[1]||(t[1]=e=>u.value=!1),onSaved:k},null,8,["show","entities-states"])]))]))}}),[["__scopeId","data-v-fdcf5fa8"]]),Sa={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},Ea={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},Ia={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},Da=oe(he(i({__name:"App",setup(e){const t=o(1),a=o(null),l=o(null),i=xe(),{weatherData:u,showRainEffect:p,showThunderEffect:w,showSnowEffect:m}=x(i),g=r(()=>{var e,t;if(!u.value)return!1;const a=null!=(t=null==(e=u.value.current)?void 0:e.weather_code)?t:-1;if(p.value){if(a>=51&&a<=67||a>=80&&a<=82||a>=95&&a<=99)return!0}if(m.value){if(a>=71&&a<=77||85===a||86===a)return!0}if(w.value){if(95===a||96===a||99===a)return!0}return!1});let y=0,b=null;function k(){b&&(clearTimeout(b),b=null),1!==t.value&&(b=window.setTimeout(()=>{_(1)},3e4))}function _(e){t.value=e,k(),0===e&&a.value&&a.value.updateAllStates(),2===e&&l.value&&l.value.refreshToday()}function M(e){y=e.touches[0].clientX,k()}function C(e){const a=e.changedTouches[0].clientX,l=y-a;Math.abs(l)>50&&(l>0&&t.value<2?_(t.value+1):l<0&&t.value>0&&_(t.value-1))}function S(e){y=e.clientX,k()}function E(e){const a=y-e.clientX;Math.abs(a)>50&&(a>0&&t.value<2?_(t.value+1):a<0&&t.value>0&&_(t.value-1))}return n(()=>{window.addEventListener("keydown",k),window.addEventListener("click",k)}),s(()=>{window.removeEventListener("keydown",k),window.removeEventListener("click",k),b&&clearTimeout(b)}),(e,o)=>(h(),c("div",{class:"viewport-container overflow-hidden relative w-screen h-screen bg-black",onTouchstart:M,onTouchend:C,onMousedown:S,onMouseup:E},[f("div",{class:"main-slider flex h-full transition-transform duration-700 cubic-bezier",style:T({transform:"translateX(-".concat(100*t.value,"vw)"),width:"300vw"})},[f("div",Sa,[v(Ta,{ref_key:"smartHomeRef",ref:a},null,512)]),f("div",Ea,[v(Jt)]),f("div",Ia,[v(Le,{ref_key:"calendarRef",ref:l},null,512)])],4),v(ve),g.value?(h(),A(be,{key:0})):d("",!0)],32))}}),[["__scopeId","data-v-6c5fe6cd"]])),ja=ne();ja.use(se),Da.use(ja),Da.mount("#app");export{a as __vite_legacy_guard};
